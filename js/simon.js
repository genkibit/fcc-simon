(function(){function w(a,c){y[a].classList.toggle("effect-01");window.setTimeout(function(){y[a].classList.toggle("effect-01")},c)}function z(a,c,d){this.context=a;this.urlList=c;this.onload=d;this.bufferList=[];this.loadCount=0}function n(a){var c;""!==a.canPlayType("audio/mp3")?c=".mp3":""!==a.canPlayType("audio/ogg")&&(c=".ogg");return c}function D(a){f["0"]=a[0];f["1"]=a[3];f["2"]=a[2];f["3"]=a[1];f.x=a[4]}function x(a){var c=p.createGain(),d=p.createBufferSource();d.buffer=f[a];d.connect(c);
c.connect(p.destination);c.gain.value=.05;d.start(0)}function t(){if(!1===g)return g=!0,A(),!1;k=!1;u=!0;e.val(h);x(q[b]);w(q[b],300);b+1===h?(b=0,k=!0,u=!1):b++;!0===u&&!0===g&&(B=window.setTimeout(t,v))}function A(){g=!g;if(!0===g){window.AudioContext=window.AudioContext||window.webkitAudioContext;p=new AudioContext;var a=["assets/sound/green"+n(r),"assets/sound/red"+n(r),"assets/sound/yellow"+n(r),"assets/sound/blue"+n(r),"assets/sound/wrong"+n(r)];C=new z(p,a,D);C.load();m=!1;l=!0;e.val("- -")}else window.clearTimeout(B),
u=!1,l=!0,e.val("")}var E=$(".pad"),y=$(".effect"),F=$(".panel"),e=$("#count"),q="01230123012301230123".split(""),b=0,h=1,v=1E3,B,u=!1,k=!1,g=!1,m=!1,l=!0,r=document.getElementById("sound-effects"),f={},p,C;z.prototype={loadBuffer:function(a,c){var d=this,b=new XMLHttpRequest;b.open("GET",a,!0);b.responseType="arraybuffer";b.onload=function(){d.context.decodeAudioData(b.response,function(b){if(b){if(d.bufferList[c]=b,++d.loadCount==d.urlList.length)d.onload(d.bufferList)}else alert("error decoding file data: "+
a)},function(a){console.error("decodeAudioData error",a)})};b.onerror=function(){alert("BufferLoader: XHR error")};b.send()},load:function(){for(var a=0;a<this.urlList.length;++a)this.loadBuffer(this.urlList[a],a)}};E.each(function(){$(this).on("click",function(){if(!0===k&&!0===g){var a=$(this).val();if(q[b]===a&&!1===l)if(x(a),w(a,300),b++,20===h&&b===h)e.val("You Win!"),l=!0,k=!1;else{if(b===h){b=0;k=!1;h++;switch(h){case 5:v=800;break;case 9:v=600;break;case 13:v=400}window.setTimeout(t,1500)}}else x("x"),
w(a,2E3),k=!1,!0===m?(e.val("!!"),l=!0):(e.val("Try Again"),b=0,window.setTimeout(t,2500))}})});F.each(function(){$(this).on("click",function(){var a=$(this).val();"power"===a&&A();if(!0===g&&!0===l)if("start"===a){a=q;var c;for(c=a.length-1;0<c;c--){var d=Math.floor(Math.random()*(c+1));var f=a[c];a[c]=a[d];a[d]=f}q=a;b=0;k=!1;m=m||!1;e.val("- -");l=!1;h=1;t()}else"mode"===a&&((m=!m)?e.val("strict"):e.val("easy"))})});e.val("");$(document).ready($("body").animate({opacity:1},1500))})();
